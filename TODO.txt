//BoolFactory везде где возвращаю чистый bool//TODO правильно ли так делать? может не bool возвращать а обертку?
//сделать обход логики которая мапит return с заданным списком, что бы был варик вернуть что захочешь!!
//тут обработку новую под bool src\components\Body\CardsList\BodyCardsListMain.tsx
//и переделать хедер под обычное меню
//когда передается не валидная модель в апи(плохая почта например), то возвращается не мой объект(структура) ошибок а дефолтный, надо поправить на мой
//вынесте в сервис(там кусок кода лишний)
//E:\csharp\Menu\Back\Menu\DAL\Models\DAL\Repositories\ArticleRepository.cs
//нужна вкладка, там кнопка добавить, добавляется просто шаблон и так тыкаешь много раз, создается куча шаблонов, потом 1 кнопкой все добавляешь
//просто нажал показать слово, и дальше тыкал следующее слово, везде оно было отображено, скорее всего этот стейт не очищается
//при редактировании, не нажал на галку удалить изображение, на серв улетело ->delete_main_image: undefined
//когда на серв уходит запрос надо что то сделать, что бы не дать понатыкать всего, возможно сделать так что при получении ответа не обращаться к current card тк ее легко изменить, а искать например в списке, но тогда надо как то проверять на удаление?
//при запросах на бэк сбрасывается текущая карточка, это надо делать только если та по которой был запрос не выбрана прям ща
//"показать спрятанные" - сделать чекбоксом


если попробовать зайти по http(локально) то страница просто в бесконечной загрузке и ничего не происходит, по https норм. нужен редирект или что то еще. а на ажуре наоборот только http работает

нет возможности выйти из учетки
при скачивании файла русские буквы видимо не работают. скачивается норм, но в excel отображается неправильно 
показать новый шаблон — отображается чекбокс на удаление картинки
а смогу ли я адекватно поменять например возвращаемый тип в апи на xml в менюхе?

картинки надо обрезать и отдавать в разные места тех размеров которые нужны
+убирать метоинфу
когда серв не отвечает нормально, можно попробовать из кеша браузера поднимать словарь например

зашел неавторизованным на /menu рефреш токена не прошел, снизу ошибка "произошла неизвестная ошибка", хотя вернулось 401 с ошибкой авторизации
когда отправляем запрос на серв надо проверять какие кнопки его могут сломать и мб их лочить
кнопка что бы скрыть список слов

думаю не совсем правильно--в компоненте карточки хранить последний показанный id(краты) при рендере сравнить его, ели изменен то обнляем весь стейт(или то что нужно)
это может помочь перетащить часть свойст внуть краточки



???закешировать изображение браузер

отображать только те кнопки которые можно нажать прям сейчас
хорошо бы добавить какое то озвучивание, может ссылку на перевод
нужно поле для ввода, вводишь слово и показывает правильно или нет


делать сеты слов? типо просто список, в список можно добавить и удалить
{
действия с сетом
создать сет
удалить слово из сета
добавить слово в сет(думаю при редактировании слово нужна какая то логика что бы добавлять удалять принадлежность к сетам)
--
на странице быстрого создания сделать выбор сета или создание нового
создание сетов - отдельная страница ?
на карточке множественный дроплист для выбора сетов? звучит неудобно
страница редактирования сетов, похоже на страницу слов. справа список сетов, слева

перед экраном "отображение всех слов", сделать экран выбора сета, выбираешь сет и загружаются только эти слова, можно выбрать сет "все слова"
добавляем кнопку "удалить из сета", доступна только если выбран сет
}


загрузка файлом

https://localhost:44305/menu-app/detail/1 - порастягивать, при маленьком экране "файл не выбран" выходит за границы

ошибки модели отрисовываются на англ  ошибка при реге —»The Password field is required

загрузка файла с словами очень опасное место, проверять формат, размер файла мб побольше разрешить(хотя хз), надо обязательно каждую строку проверить на иньекции всякие


когда отправляю запрос на редач(мб и на создание) нужна какая то заглушка
//при загрузке картинок наверное базовое имя сохранять не надо
сделать возможность открывать картинку(приближать фул экран)
транзакции на редактирование данных, там где надо
потестить удаление картинок и в блобе и локально
валидация всех картинок и файлов: вес, расширение, чистить метаинфу
нужна еще и выгрузка в файл
проверить при удалении статьи удалятся ли кратинки( и бд и хранилище)

!
//после регистрации ничего не произошло, меня никуда не перекинуло
везде на фронте и в апи menu->menuApp

сделать само меню на котором можно выбирать апы

разобраться как вытащить с ажуры например логи, как костыль копировать в блоб
надо как то логи из докера доставать, когда он будет задеплоен


-дописать return типы - как пример на detail
добавить логгер
добавить обработку ошибок
логгер пишет все запросы, надо бы убрать?
тесты
сваггер
валидация картинок - вес названия расширение
global.json - нужен или нет? создавался для докера

!!
WriteReturnResponseAsync - проблема такой штуки в том что это слишком слабосвязанно
допустим я изменил 1 из return типов и я даже не могу узнать где он используется, фабрики мб оставить но вызывать явно?





если что то сломается IWebHostEnvironment
то смотреть сюда https://docs.microsoft.com/en-us/aspnet/core/migration/22-to-30?view=aspnetcore-3.1&tabs=visual-studio#framework-reference





#plinitpoker


//запретить обсерверам голосовать - ui+ бэк
//в репозитории и интерфейсе все roomname привести к 1 виду
//добавляются роли пользователей, их можно назначать, админ, обсервер
//потестить изменение имени у пользователя в руме
//сейчас получается useeffect с пустым значением нельзя юзать для загрузки данных через хаб потому что
//на момент первого рендера он еще не подключен, возможно в пропсах делать свойство hubIsConnected и на него вешать уже //также через useeffect все что надо
        //начать голосование
        //закончить с подсчетом голосов мин макс среднее
//подсветка min max не работает
//парсить урл на странице index(вход в руму) если там есть имя комнаты то (меняем урл на обычный индекс, а надо ли?) и //имя комнаты подставляем в форму
//когда подключаемся к room в урле может быть название комнаты, если оно есть и комната без пароля то отображаем ее, //если нет то делаем onclick по новому link на index с названием комнаты в урле и просим ввести пароль(сообщение //отобразить или что то такое)
//вход в руму сверстать
//сделать урл комнаты в урл, по нему можно будет подключиться, 
//сделать при создании кнопку "доступ по ссылке"
//потестить чекбокс сокрытия оценок, потестить отображение оценок у обычных пользователей когда кто то проголосовал и нет
//        todo нужна кнопка "обновить список пользователей?"
        //когда голосование закрыто можно подсветить пользователей у которых минимум и максимум
//        alert you kicked отображается только у создателя
//        справа в списке можно отобразить свой голос даже при открытом голосовании
//показывать всем кто проголосовал, не показывать сами голоса
 //добавление ролей, например визитор, что бы он не смог голосовать
//возможность админу скрывать значения оценок, галку
//подсвечить тех кто проголосовал и кто нет
//сейчас можно выбрать текущей сторю и изменить ее
//у всех пользователей кроме изменившего текущая сторя останется старой
//походу стейт ...Change надо выносить из компонента выше
//название комнаты все таки попробовать в куки засетать и дропать юзера при дисконнекте?
//спрятать connectionId пользователей
//CurrentUserIsAdmin - на фронте не работает тк сравнивает не те id из за этого всегда false
//123 - отдаю id пользователя
//с 2го пользака попробовать проголосовать, голос не пророс
//при загрузке румы, надо получать еще и истории + получать текущую историю
//storiesListRender - в отдельный компонент
//поменять id пользователей на гуиды, и уже их отдавать клинтам
//при авторизации в основном приложении, надо доставать id пользователя, хранить еще и его, и при подключении к руме //смотреть есть ли он уже и менять id подключения, если id не нулевое то старого пользователя отключаем и отправляем ему //уведомление



todo now
рефактор хаба, повыносить все либо в репо либо в сервис
статус комнаты думаю лучше засунуть в roomInfo?

на фронте название коннектов к хабу тоже вынести в константы или типо того + в контроллер

удаление комнаты?
выйти из комнаты?



когда авторизованный пользователь открывает окно ввода логина и комнаты, в логин можно подставлять его имя из учетки




комнаты которые создал авторизованный пользователь должны сохраняться в бд по истечении жизни, комнаты которые создал аноним должны удаляться
при подключении к существующей комнате если ее нет в оперативке, лезем в бд и проверяем еще и там

кнопки в настройках частично можно сделать иконками, типо скрыть - глаз, обновить - знак обновления

//при подключении к руме запрашивать всю инфу а не только статус


+-отписка от событий хаба
то как в контроллере получаю id пользователя прям такое
обращение в хаб вынести в контроллер?
        TODO !!!!!!!!!!!надо потестить многопоточность, могу ли я без блокировки стучаться к room что бы получить lockobj или его надо выносить
        настроить таймауты у сигналр + https://github.com/dotnet/aspnetcore/issues/20151
        https://docs.microsoft.com/ru-ru/aspnet/signalr/overview/guide-to-the-api/handling-connection-lifetime-events

        а безопасно ли показывать юзерам чужие id подключений? если получать их в контроллере то нет 100%
        // надо чистить то что приходит от юзера, уже реализовано просто прикрутить
        todo очистка старых комнат
        todo методы которые в Room надо вынести в репо, GetValueFromRoomAsync тоже
        если 2 раза быстро нажать подключение к комнате, все норм отработает?
        при подключении к "законченному" голосованию не отображаются результаты, надо бы в контроллер закинуть
        есть места где можно сделать что то типо транзакций(или руками может откатывать критичные данные
        надо как то отписываться от событий, например сейчас если зайти в руму, потом справа сверху перейти на страницу логина
        а в это время админ этого юзера кикнет, у него будет рефреш страницы тк он подписан
        сокеты в ажуре отваливаются! все работает через какие то ивенты сервера
       
какой то
время голосования
//алерты что бы удалялись по таймауту
руму надо сохранять в бд а не теперь
и там надо сохранять истории и тд
в комнате есть истории, они могут завершаться и тд


добавить кнопку "сохранить" на руму? только для фул авторизованных пользователей?
нужна карточка чашки чая

есть список историй,
возле каждой справа кнопки  - сделать текущей, удалить, сохранить изменения(кнопка у текущей стори
нужна какая то вкладка - выполненные истории. там по дефолту отображаются только те что были сегодня, но есть кнопка загрузить все


редактирование сторей должно быть доступно только админу

надо css прогнать через css-prefixer


поставить на бэке точку останова, серв перестанет пинговать клиент, клиент отвалится с ошибкой, и сокеты перестают работать, сделать на такой случай хотя бы алерт какой нибудь или может быть кнопку реконекта?
возле названия румы можно нарисовать большой красный восклицательный знак и при наведении писать инфу о том что рума одноразовая и лучше бы авторизоваться

при отключении авторизованного пользователя нельзя передавать админку!

нужна кнопка сохранить комнату
нужна кнопка загрузить из бд истории

при создании румы авторизованным пользователем, что если токен будет просрочен? надо как то отправить ответ на рефреш
в хабе при просроченном токене надо что то отдать на фронт что бы он рефрешнулся

в jwt либо надо докинуть комменты на интерфейсы, + как то разгрести, дописать адекватный мануал к использованию


//подключился к законченному голосованию voteInfo уже другой, надо не учитывать в результате людей без голосов

зайти с 2х учеток, "выполнить" сторю, посмотреть как отрисуется, проблема с оценкой и датой





